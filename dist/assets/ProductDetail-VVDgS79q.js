import{i as e,u as s,r as a,j as t,P as r,L as i,m as l,M as o,k as n,S as c,H as d,c as m}from"./index-CAEXN0lK.js";import{S as x}from"./SEO-CPrLlM7W.js";import{A as p}from"./arrow-left-B6PU8jtu.js";import{S as h}from"./star-yUo1dHzk.js";import{C as g}from"./check-CHhFL6FE.js";import{T as f}from"./truck-Fpznj2oC.js";import{S as u}from"./sparkles-Dv4hl07I.js";const b=()=>{const{id:b}=e(),{addToCart:j,setIsCartOpen:y}=s(),[v,w]=a.useState(null),[N,k]=a.useState(!0),[S,C]=a.useState(0),[$,E]=a.useState(1),[O,z]=a.useState(null),[L,P]=a.useState(!1),[q,F]=a.useState([]),[I,A]=a.useState(!1);a.useEffect(()=>{(async()=>{var e;try{const s=await m.get(`/products/${b}`);w(s.data),s.data.variations&&s.data.variations.length>0&&z(s.data.variations[0]);if(localStorage.getItem("token")){const s=await m.get("/users/profile");A(null==(e=s.data.favorites)?void 0:e.includes(b))}const a=await m.get(`/products/${b}/similar`);F(a.data)}catch(s){console.error("Error fetching product details",s)}finally{k(!1)}})()},[b]);if(N)return t.jsx("div",{className:"min-h-screen flex items-center justify-center font-bold text-primary animate-pulse",children:"Cargando cositas... ðŸŒ¸"});if(!v)return t.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-400 font-bold",children:"Producto no encontrado ðŸ˜¢"});const M=v.images&&v.images.length>0?[v.image,...v.images][S]:v.image,T=v?{"@context":"https://schema.org/","@type":"Product",name:v.name,image:v.image,description:v.description,brand:{"@type":"Brand",name:"Kimju Hogar"},offers:{"@type":"Offer",priceCurrency:"COP",price:v.price,availability:v.stock>0?"https://schema.org/InStock":"https://schema.org/OutOfStock",url:window.location.href}}:null;return t.jsxs(r,{children:[t.jsx(x,{title:v.name,description:v.description,image:v.image,schema:T,canonical:window.location.href}),t.jsxs("div",{className:"bg-white min-h-screen pt-28 pb-20 overflow-hidden relative",children:[t.jsx("div",{className:"absolute top-20 left-0 w-96 h-96 bg-primary-light/20 rounded-full blur-[80px] -z-10 pointer-events-none"}),t.jsx("div",{className:"absolute bottom-20 right-0 w-[500px] h-[500px] bg-purple-100/40 rounded-full blur-[80px] -z-10 pointer-events-none"}),t.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs(i,{to:"/shop",className:"inline-flex items-center font-bold text-xs mb-8 text-gray-500 hover:text-primary transition-colors",children:[t.jsx(p,{className:"w-4 h-4 mr-2"})," Volver a la tienda"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 mb-24",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white border-4 border-pink-100 rounded-[2rem] p-8 shadow-xl aspect-square relative flex items-center justify-center overflow-hidden",children:[t.jsx("img",{src:M,alt:v.name,className:"w-full h-full object-contain hover:scale-105 transition-transform duration-500",width:"600",height:"600"}),v.discount>0&&t.jsxs("span",{className:"absolute top-6 left-6 bg-primary text-white border-2 border-white px-4 py-2 text-sm font-bold rounded-full shadow-lg z-10 animate-bounce-slow",children:["-",v.discount,"% OFF"]})]}),v.images&&v.images.length>0&&t.jsx("div",{className:"flex gap-4 justify-center",children:[v.image,...v.images].map((e,s)=>t.jsx("button",{onClick:()=>C(s),className:"w-20 h-20 bg-white border-2 rounded-2xl p-2 cursor-pointer transition-all "+(S===s?"border-primary shadow-lg scale-110":"border-gray-100 hover:border-pink-200"),children:t.jsx("img",{src:e,className:"w-full h-full object-contain rounded-lg",loading:"lazy",width:"80",height:"80"})},s))})]}),t.jsxs("div",{className:"flex flex-col justify-center",children:[t.jsx("div",{className:"mb-4",children:t.jsx(i,{to:`/shop?category=${v.category}`,className:"text-xs font-bold uppercase tracking-widest text-primary bg-pink-50 px-3 py-1 rounded-full hover:bg-primary hover:text-white transition-all",children:v.category})}),t.jsx("h1",{className:"text-4xl md:text-5xl font-display font-black text-secondary tracking-tight mb-4 leading-none",children:v.name}),t.jsxs("div",{className:"flex items-center space-x-6 mb-8 border-b-2 border-pink-50 pb-8",children:[t.jsxs("div",{className:"flex flex-col",children:[v.discount>0&&t.jsxs("span",{className:"text-gray-400 text-sm font-bold line-through",children:["$",v.price.toLocaleString()]}),t.jsxs("span",{className:"text-5xl font-display font-black text-primary-dark",children:["$",(v.price*(1-(v.discount||0)/100)).toLocaleString()]})]}),t.jsxs("div",{className:"flex items-center text-yellow-400",children:[[1,2,3,4,5].map(e=>t.jsx(h,{className:"w-5 h-5 fill-current"},e)),t.jsx("span",{className:"ml-2 text-gray-400 text-xs font-bold",children:"(4.9)"})]})]}),t.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed font-medium text-lg",children:v.description}),v.variations&&v.variations.length>0&&t.jsxs("div",{className:"mb-8",children:[t.jsx("h3",{className:"text-sm font-bold uppercase text-gray-500 mb-3",children:"Elige tu favorito:"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:v.variations.flatMap(e=>e.split(",")).map(e=>e.trim()).filter(e=>e).map(e=>t.jsx("button",{onClick:()=>z(e),className:"px-6 py-2 border-2 rounded-full font-bold text-sm transition-all "+(O===e?"bg-primary text-white border-primary shadow-lg transform -translate-y-1":"bg-white text-gray-600 border-gray-200 hover:border-pink-300"),children:e},e))})]}),t.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[t.jsx("span",{className:"text-secondary font-bold text-sm",children:"Disponibilidad:"}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold "+(v.stock>0?"bg-green-50 text-green-500":"bg-red-50 text-red-500"),children:v.stock>0?`${v.stock} unidades en stock`:"Agotado"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-10",children:[t.jsxs("div",{className:"flex items-center border-2 border-pink-100 bg-white rounded-full w-max shadow-sm",children:[t.jsx("button",{onClick:()=>E(Math.max(1,$-1)),className:"p-4 hover:text-primary transition-colors",children:t.jsx(o,{className:"w-4 h-4"})}),t.jsx("span",{className:"px-4 font-bold font-display text-xl",children:$}),t.jsx("button",{onClick:()=>E($+1),className:"p-4 hover:text-primary transition-colors",children:t.jsx(n,{className:"w-4 h-4"})})]}),t.jsx("button",{onClick:()=>{j(v,$,O),P(!0),y(!0),setTimeout(()=>P(!1),2e3)},className:"flex-1 py-4 px-8 rounded-full font-bold tracking-wider flex items-center justify-center transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1 active:translate-y-0 "+(L?"bg-green-500 text-white":"bg-secondary text-white hover:bg-primary"),children:L?t.jsxs(t.Fragment,{children:[t.jsx(g,{className:"w-5 h-5 mr-2"})," Â¡Listo!"]}):t.jsxs(t.Fragment,{children:[t.jsx(c,{className:"w-5 h-5 mr-2"})," Agregar al Carrito"]})}),t.jsx("button",{onClick:async()=>{if(localStorage.getItem("token"))try{await m.post(`/users/favorites/${b}`,{}),A(!I)}catch(e){console.error("Error toggling favorite",e)}else alert("Por favor inicia sesiÃ³n para guardar tus favoritos ðŸŽ€")},className:"w-14 h-14 rounded-full border-2 flex items-center justify-center transition-all "+(I?"bg-primary border-primary text-white shadow-lg":"border-pink-100 text-pink-300 hover:bg-pink-50 hover:text-primary"),children:t.jsx(d,{className:"w-6 h-6 "+(I?"fill-white":"")})})]}),t.jsxs("div",{className:"flex gap-6 text-xs font-bold uppercase text-gray-500",children:[t.jsxs("div",{className:"flex items-center bg-pink-50/50 px-4 py-2 rounded-lg gap-2 border border-pink-100",children:[t.jsx(f,{className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-primary-dark",children:"EnvÃ­o Contra Entrega"})]}),t.jsxs("div",{className:"flex items-center bg-gray-50 px-4 py-2 rounded-lg gap-2",children:[t.jsx(h,{className:"w-5 h-5 text-primary"}),t.jsx("span",{children:"GarantÃ­a de Calidad"})]})]})]})]}),q.length>0&&t.jsxs("div",{className:"border-t-2 border-pink-50 pt-16",children:[t.jsxs("h2",{className:"text-3xl font-display font-black text-secondary mb-10 flex items-center gap-3",children:[t.jsx(u,{className:"w-6 h-6 text-primary"}),"Cositas Similares que te EncantarÃ¡n"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:q.map(e=>t.jsx(i,{to:`/product/${e._id}`,className:"group block",children:t.jsxs("div",{className:"bg-white border-2 border-pink-50 rounded-3xl p-4 hover:border-primary hover:shadow-xl transition-all h-full flex flex-col",children:[t.jsx("div",{className:"aspect-square rounded-2xl overflow-hidden mb-4 bg-gray-50",children:t.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform",loading:"lazy",width:"300",height:"300"})}),t.jsx("h3",{className:"font-bold text-secondary text-sm group-hover:text-primary truncate mb-2",children:e.name}),t.jsxs("p",{className:"text-primary-dark font-black mt-auto",children:["$",(e.price*(1-(e.discount||0)/100)).toLocaleString()]})]})},e._id))})]})]})]})]})};export{b as default};
