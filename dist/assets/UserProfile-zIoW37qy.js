import{h as e,r as s,f as a,a as t,j as r,P as l,U as i,H as o,l as d,m as n,L as c,c as x,b as m,n as p,X as h}from"./index-uFpnW5qm.js";import{P as u,F as b,D as g,h as f,E as y}from"./html2canvas.esm-C1PhPGOh.js";import{A as j,c as N}from"./colombia-sG3lnVfw.js";import{M as v}from"./map-pin-DrL5HxMV.js";import{C as w}from"./credit-card-VNYVIPCw.js";import{S as k}from"./shield-GsiPDEng.js";import"./check-BcHC8xnz.js";const C=e("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),S=()=>{var e;const[S,D]=s.useState("profile"),{user:E,logout:P,isAuthenticated:I,refreshUser:A}=a(),z=t(),[T,L]=s.useState({name:(null==E?void 0:E.name)||"",phone:(null==E?void 0:E.phone)||""}),[M,$]=s.useState(!1),[G,F]=s.useState({type:"",text:""}),[_,q]=s.useState(!1),[U,H]=s.useState(!1),[O,V]=s.useState(!1),[B,K]=s.useState({name:"",street:"",neighborhood:"",city:"",state:"",zip:"",country:"Colombia",additionalInfo:"",phone:"",isDefault:!1}),[R,J]=s.useState(null),[Q,W]=s.useState([]),[X,Y]=s.useState(!1),[Z,ee]=s.useState([]),[se,ae]=s.useState(!1),[te,re]=s.useState(null),[le,ie]=s.useState(!1),[oe,de]=s.useState(!1);s.useEffect(()=>{I||z("/login")},[I,z]),s.useEffect(()=>{E&&L({name:E.name||"",phone:E.phone||""})},[E]),s.useEffect(()=>{if("favorites"===S){(async()=>{Y(!0);try{const e=await x.get("/users/favorites");W(e.data)}catch(e){console.error("Error fetching favorites",e)}finally{Y(!1)}})()}if("orders"===S){(async()=>{ae(!0);try{const e=await x.get("/orders/myorders");ee(e.data)}catch(e){console.error("Error fetching orders",e)}finally{ae(!1)}})()}},[S]);const ne=[{id:"profile",label:"Mi Perfil",icon:i},{id:"favorites",label:"Favoritos",icon:o},{id:"orders",label:"Mis Pedidos",icon:u},{id:"addresses",label:"Direcciones",icon:v},{id:"wallet",label:"Pagos",icon:w}];return E?r.jsx(l,{children:r.jsxs("div",{className:"pt-32 pb-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-12 flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-pink-200 to-purple-200 p-1",children:r.jsx("img",{src:`https://ui-avatars.com/api/?name=${E.name}&background=fff&color=f472b6`,alt:"Avatar",className:"w-full h-full rounded-full object-cover border-4 border-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-display font-black text-secondary mb-1",children:"Mi Cuenta"}),r.jsxs("p",{className:"text-gray-500",children:["Bienvenido de nuevo, ",r.jsx("span",{className:"text-primary font-bold decoration-wavy underline decoration-pink-200",children:E.name})," ‚ú®"]})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[r.jsxs("aside",{className:"lg:w-1/4 space-y-3",children:[ne.map(e=>r.jsxs("button",{onClick:()=>D(e.id),className:"w-full flex items-center space-x-3 px-6 py-4 font-bold text-sm rounded-2xl transition-all duration-300 "+(S===e.id?"bg-primary text-white shadow-lg transform translate-x-2":"bg-white text-gray-500 hover:bg-gray-50 hover:text-primary"),children:[r.jsx(e.icon,{className:"w-5 h-5 "+(S===e.id?"text-white":"text-pink-300")}),r.jsx("span",{children:e.label})]},e.id)),r.jsxs("button",{onClick:()=>{P(),z("/")},className:"w-full flex items-center space-x-3 px-6 py-4 font-bold text-sm text-red-400 bg-red-50 hover:bg-red-100 rounded-2xl transition-colors mt-8",children:[r.jsx(d,{className:"w-5 h-5"}),r.jsx("span",{children:"Cerrar Sesi√≥n"})]})]}),r.jsx("div",{className:"lg:w-3/4",children:r.jsxs(n.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"bg-white border-2 border-pink-100 rounded-3xl p-8 shadow-sm min-h-[500px]",children:["profile"===S&&r.jsxs("form",{onSubmit:async e=>{var s,a;if(e.preventDefault(),$(!0),F({type:"",text:""}),T.password!==T.confirmPassword)return F({type:"error",text:"Las contrase√±as no coinciden"}),void $(!1);try{await x.put("/users/profile",T);F({type:"success",text:"Perfil actualizado correctamente"});try{await A()}catch(t){console.warn("Global state refresh warning:",t)}}catch(r){console.error("Profile update error detail:",r),F({type:"error",text:(null==(a=null==(s=r.response)?void 0:s.data)?void 0:a.msg)||"Error al actualizar el perfil"})}finally{$(!1)}},className:"space-y-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-secondary mb-6 border-b-2 border-pink-50 pb-4",children:"Informaci√≥n Personal"}),G.text&&r.jsxs("div",{className:`p-4 rounded-2xl border ${"success"===G.type?"bg-green-50 border-green-200 text-green-600":"bg-red-50 border-red-200 text-red-600"} font-bold flex items-center gap-2`,children:["success"===G.type?r.jsx("span",{className:"text-xl",children:"‚úÖ"}):r.jsx("span",{className:"text-xl",children:"‚ö†Ô∏è"}),G.text]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold uppercase text-gray-400",children:"Nombre Completo"}),r.jsx("input",{type:"text",value:T.name,onChange:e=>L({...T,name:e.target.value}),className:"w-full border-2 border-gray-100 bg-gray-50 rounded-2xl p-4 font-bold focus:bg-white focus:border-primary-light focus:outline-none transition-all placeholder:text-gray-300"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold uppercase text-gray-400",children:"Email"}),r.jsx("input",{type:"email",value:E.email,disabled:!0,className:"w-full border-2 border-gray-100 bg-gray-50 rounded-2xl p-4 font-bold text-gray-400 cursor-not-allowed"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold uppercase text-gray-400",children:"Tel√©fono"}),r.jsx("input",{type:"tel",value:T.phone,onChange:e=>L({...T,phone:e.target.value}),className:"w-full border-2 border-gray-100 bg-gray-50 rounded-2xl p-4 font-bold focus:bg-white focus:border-primary-light focus:outline-none transition-all placeholder:text-gray-300"})]})]}),r.jsxs("button",{type:"submit",disabled:M,className:"bg-secondary text-white rounded-xl px-8 py-3 text-sm font-bold flex items-center space-x-2 hover:bg-primary transition-colors shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:[r.jsx(C,{className:"w-4 h-4"}),r.jsx("span",{children:M?"Guardando...":"Guardar Cambios"})]}),r.jsxs("div",{className:"pt-6 border-t border-gray-100 mt-8",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Seguridad y Cuenta"}),r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-4 rounded-xl mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",className:"w-6 h-6",alt:"Google"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-gray-700",children:"Cuenta de Google"}),r.jsx("p",{className:"text-xs text-gray-400",children:(null==E?void 0:E.googleId)?"Vinculada correctamente":"No vinculada"})]})]}),(null==E?void 0:E.googleId)&&r.jsx("span",{className:"text-xs font-bold bg-green-100 text-green-600 px-3 py-1 rounded-full",children:"Conectado"})]}),r.jsx("div",{className:"mt-8",children:_?r.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100 animate-fade-in",children:[r.jsx("p",{className:"text-red-800 font-bold text-sm mb-2",children:"¬øEst√°s seguro? Esta acci√≥n no se puede deshacer."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:async()=>{try{await x.delete("/users/profile"),localStorage.removeItem("token"),window.location.href="/login"}catch(e){console.error(e),F({type:"error",text:"No se pudo eliminar la cuenta"})}},className:"bg-red-500 text-white text-xs font-bold px-4 py-2 rounded-lg hover:bg-red-600",children:"S√≠, eliminar"}),r.jsx("button",{type:"button",onClick:()=>q(!1),className:"bg-white text-gray-600 text-xs font-bold px-4 py-2 rounded-lg border border-gray-200 hover:bg-gray-50",children:"Cancelar"})]})]}):r.jsx("button",{type:"button",onClick:()=>q(!0),className:"text-red-400 text-sm font-bold hover:text-red-600 underline",children:"Eliminar mi cuenta permanentemente"})})]})]}),"favorites"===S&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between border-b-2 border-pink-50 pb-4",children:[r.jsxs("h2",{className:"text-2xl font-bold text-secondary flex items-center gap-2",children:[r.jsx(o,{className:"w-6 h-6 text-primary fill-primary"})," Mi Lista de Favoritos"]}),r.jsxs("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:[Q.length," productos"]})]}),X?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>r.jsx("div",{className:"animate-pulse bg-gray-50 rounded-3xl aspect-[3/4]"},e))}):Q.length>0?r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map(e=>r.jsx(c,{to:`/product/${e._id}`,className:"group relative",children:r.jsxs("div",{className:"bg-white border-2 border-pink-50 rounded-[2.5rem] p-4 hover:border-primary hover:shadow-xl transition-all h-full flex flex-col",children:[r.jsxs("div",{className:"aspect-square rounded-[2rem] overflow-hidden mb-4 bg-gray-50 relative p-4",children:[r.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain group-hover:scale-110 transition-transform"}),r.jsx("button",{onClick:async s=>{s.preventDefault(),await x.post(`/users/favorites/${e._id}`,{}),W(Q.filter(s=>s._id!==e._id))},className:"absolute top-4 right-4 bg-white/80 backdrop-blur-sm p-2 rounded-full text-red-400 hover:bg-red-400 hover:text-white transition-all shadow-sm",children:r.jsx(o,{className:"w-4 h-4 fill-current"})})]}),r.jsx("h3",{className:"font-bold text-secondary text-sm group-hover:text-primary truncate mb-1",children:e.name}),r.jsxs("p",{className:"text-primary-dark font-black mt-auto",children:["$",(e.price*(1-(e.discount||0)/100)).toLocaleString()]})]})},e._id))}):r.jsxs("div",{className:"text-center py-20 bg-pink-50/50 rounded-3xl border-2 border-dashed border-pink-100",children:[r.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:r.jsx(o,{className:"w-10 h-10 text-pink-200"})}),r.jsx("h3",{className:"text-xl font-display font-bold text-secondary mb-2",children:"¬°Tu lista est√° muy solita! üò¢"}),r.jsx("p",{className:"text-gray-500 font-medium mb-8",children:"Guarda las cositas que m√°s te gusten para comprarlas despu√©s."}),r.jsxs(c,{to:"/shop",className:"btn-kawaii inline-flex items-center gap-2",children:["Ir a la Tienda ",r.jsx(m,{className:"w-4 h-4"})]})]})]}),"orders"===S&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-secondary mb-6 border-b-2 border-pink-50 pb-4",children:"Historial de Pedidos"}),se?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>r.jsx("div",{className:"animate-pulse bg-gray-50 h-32 rounded-3xl"},e))}):Z.length>0?r.jsx("div",{className:"space-y-4",children:Z.map(e=>r.jsxs("div",{className:"border-2 border-pink-50 p-6 rounded-[2rem] hover:shadow-md transition-all bg-white relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 right-0 p-4",children:r.jsx("span",{className:"text-[10px] font-black uppercase px-3 py-1 rounded-full "+(e.isPaid?"bg-green-100 text-green-600":"bg-amber-100 text-amber-600"),children:e.isPaid?"Pagado":"Pendiente de Pago"})}),r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[r.jsx("div",{className:"w-16 h-16 bg-pink-50 rounded-2xl flex items-center justify-center shrink-0",children:r.jsx(u,{className:"w-8 h-8 text-primary opacity-60"})}),r.jsxs("div",{className:"flex-grow",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("h3",{className:"font-black text-secondary uppercase text-sm",children:["Pedido #",e._id.slice(-6).toUpperCase()]}),r.jsx("span",{className:"text-gray-300 text-sm",children:"‚Ä¢"}),r.jsx("span",{className:"text-xs font-bold text-gray-400 capitalize",children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})}),r.jsx("span",{className:"text-[10px] font-black text-primary/60 bg-pink-50 px-1.5 py-0.5 rounded",children:new Date(e.createdAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),r.jsxs("p",{className:"text-gray-500 text-sm font-medium mb-2",children:[e.orderItems.length," ",1===e.orderItems.length?"producto":"productos"," ‚Ä¢ Total: ",r.jsxs("span",{className:"text-primary-dark font-black",children:["$",e.totalPrice.toLocaleString()]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.orderItems.slice(0,3).map((e,s)=>r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-50 border border-gray-100 p-1 overflow-hidden",children:r.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover rounded shadow-sm",title:e.name})},s)),e.orderItems.length>3&&r.jsxs("div",{className:"w-10 h-10 rounded-lg bg-gray-50 border border-gray-100 flex items-center justify-center text-[10px] font-bold text-gray-400",children:["+",e.orderItems.length-3]})]})]}),r.jsx("div",{className:"shrink-0 flex items-center",children:r.jsxs("button",{onClick:()=>{re(e),ie(!0)},className:"flex items-center gap-2 text-xs font-black uppercase text-secondary hover:text-primary transition-colors group-hover:translate-x-1 duration-300",children:["Detalles ",r.jsx(m,{className:"w-4 h-4"})]})})]})]},e._id))}):r.jsxs("div",{className:"text-center py-20 bg-pink-50/50 rounded-3xl border-2 border-dashed border-pink-100",children:[r.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:r.jsx(u,{className:"w-8 h-8 text-pink-300"})}),r.jsx("p",{className:"font-bold text-gray-400",children:"A√∫n no tienes pedidos realizados... ¬°Hora de comprar! üõçÔ∏è"}),r.jsx(c,{to:"/shop",className:"mt-4 inline-block text-primary font-bold hover:underline",children:"Ir a la tienda"})]})]}),r.jsx(p,{children:le&&te&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-secondary/40 backdrop-blur-sm",children:r.jsxs(n.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-[2.5rem] shadow-2xl flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-pink-50 flex items-center justify-between bg-white sticky top-0 z-10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-primary/10 p-2 rounded-xl",children:r.jsx(b,{className:"w-5 h-5 text-primary"})}),r.jsx("h3",{className:"font-display font-black text-secondary uppercase text-lg",children:"Detalles del Pedido"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:async()=>{if(!te)return;de(!0);const e=document.getElementById("invoice-content");try{const s=await f(e,{scale:2}),a=s.toDataURL("image/png"),t=new y({orientation:"portrait",unit:"px",format:[s.width/2,s.height/2]});t.addImage(a,"PNG",0,0,s.width/2,s.height/2),t.save(`Kimju-Hogar-Factura-${te._id.slice(-6).toUpperCase()}.pdf`)}catch(s){console.error("Error generating PDF:",s)}finally{de(!1)}},disabled:oe,className:"bg-pink-50 text-primary hover:bg-primary hover:text-white px-4 py-2 rounded-xl text-xs font-bold transition-all flex items-center gap-2 disabled:opacity-50",children:oe?"Generando...":r.jsxs(r.Fragment,{children:[r.jsx(g,{className:"w-4 h-4"})," Descargar PDF"]})}),r.jsx("button",{onClick:()=>ie(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(h,{className:"w-6 h-6 text-gray-400"})})]})]}),r.jsx("div",{className:"flex-grow overflow-y-auto p-4 md:p-8 custom-scrollbar bg-gray-50/30",children:r.jsxs("div",{id:"invoice-content",className:"bg-white p-6 md:p-12 rounded-[2rem] border border-pink-50 shadow-sm max-w-3xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-8 mb-12",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-display font-black text-primary mb-2",children:["KIMJU ",r.jsx("span",{className:"text-secondary",children:"HOGAR"})]}),r.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Tienda de decoraci√≥n y detalles"}),r.jsx("p",{className:"text-xs font-medium text-gray-400",children:"NIT: 123.456.789-0 ‚Ä¢ Medell√≠n, Colombia"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("h2",{className:"text-xl font-display font-black text-secondary uppercase mb-1",children:"FACTURA DE VENTA"}),r.jsxs("p",{className:"text-primary font-bold text-sm",children:["#ORD-",te._id.slice(-6).toUpperCase()]}),r.jsxs("div",{className:"mt-4 space-y-1",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-300 uppercase",children:"Fecha de Emisi√≥n"}),r.jsx("p",{className:"text-xs font-bold text-secondary",children:new Date(te.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"})}),r.jsx("p",{className:"text-xs font-bold text-primary",children:new Date(te.createdAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 mb-12 p-6 bg-pink-50/30 rounded-3xl border border-pink-50",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-[10px] font-black text-primary uppercase mb-3 tracking-widest",children:"Facturar a:"}),r.jsx("p",{className:"font-bold text-secondary",children:E.name}),r.jsx("p",{className:"text-sm text-gray-500",children:E.email}),r.jsx("p",{className:"text-sm text-gray-500",children:E.phone||"Sin tel√©fono"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-[10px] font-black text-primary uppercase mb-3 tracking-widest",children:"Enviar a:"}),r.jsx("p",{className:"font-bold text-secondary",children:te.shippingAddress.address}),r.jsxs("p",{className:"text-sm text-gray-500",children:[te.shippingAddress.city,", ",te.shippingAddress.postalCode]}),r.jsx("p",{className:"text-sm text-gray-500",children:te.shippingAddress.country})]})]}),r.jsx("div",{className:"mb-12 overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-pink-50",children:[r.jsx("th",{className:"py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Descripci√≥n"}),r.jsx("th",{className:"py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Cant."}),r.jsx("th",{className:"py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Precio"}),r.jsx("th",{className:"py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Subtotal"})]})}),r.jsx("tbody",{className:"divide-y divide-pink-50",children:te.orderItems.map((e,s)=>r.jsxs("tr",{className:"group",children:[r.jsx("td",{className:"py-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-50 overflow-hidden shrink-0 border border-gray-100 p-1",children:r.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover rounded-lg"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-secondary text-sm",children:e.name}),e.selectedVariation&&r.jsx("p",{className:"text-[10px] text-primary font-bold uppercase",children:e.selectedVariation})]})]})}),r.jsxs("td",{className:"py-6 text-center font-bold text-gray-500 text-sm",children:["x",e.quantity]}),r.jsxs("td",{className:"py-6 text-right font-bold text-gray-500 text-sm",children:["$",Number(e.price).toLocaleString()]}),r.jsxs("td",{className:"py-6 text-right font-black text-secondary text-sm",children:["$",(e.quantity*e.price).toLocaleString()]})]},s))})]})}),r.jsxs("div",{className:"flex flex-col items-end gap-3 border-t-2 border-pink-50 pt-8",children:[r.jsxs("div",{className:"flex justify-between w-full max-w-[200px] text-sm font-bold text-gray-400",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["$",te.totalPrice.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between w-full max-w-[200px] text-sm font-bold text-green-500",children:[r.jsx("span",{children:"Env√≠o:"}),r.jsx("span",{className:"text-xs font-bold bg-gray-100 text-gray-500 px-2 py-1 rounded",children:"Contra Entrega"})]}),r.jsxs("div",{className:"flex justify-between w-full max-w-[250px] text-2xl font-display font-black text-secondary pt-4 border-t border-dashed border-pink-100",children:[r.jsx("span",{className:"text-primary",children:"TOTAL:"}),r.jsxs("span",{children:["$",te.totalPrice.toLocaleString()]})]})]}),r.jsxs("div",{className:"mt-20 text-center border-t border-pink-50 pt-8",children:[r.jsx("p",{className:"text-[10px] font-black text-primary uppercase mb-2 tracking-[0.2em]",children:"¬°Gracias por apoyar a Kimju Hogar! üå∏"}),r.jsx("p",{className:"text-[10px] text-gray-300 font-medium",children:"Esta es una factura digital v√°lida para registro de compras en l√≠nea."})]})]})})]})})}),"addresses"===S&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center border-b-2 border-pink-50 pb-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-secondary",children:"Mis Direcciones"}),r.jsx("button",{onClick:()=>{U?(H(!1),J(null),K({name:"",street:"",neighborhood:"",city:"",state:"",zip:"",country:"Colombia",additionalInfo:"",phone:"",isDefault:!1})):H(!0)},className:"text-xs font-bold uppercase border-2 border-pink-200 rounded-full px-4 py-2 transition-colors "+(U?"bg-pink-100 text-primary":"hover:bg-primary hover:text-white text-primary"),children:U?"Cancelar":"+ Nueva"})]}),U&&r.jsxs(n.form,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},onSubmit:async e=>{e.preventDefault(),V(!0),F({type:"",text:""});try{R?(await x.put(`/users/address/${R}`,B),F({type:"success",text:"Direcci√≥n actualizada correctamente"})):(await x.post("/users/address",B),F({type:"success",text:"Direcci√≥n agregada correctamente"})),await A(),H(!1),J(null),K({name:"",street:"",neighborhood:"",city:"",state:"",zip:"",country:"Colombia",additionalInfo:"",phone:"",isDefault:!1})}catch(s){console.error("Error saving address",s),F({type:"error",text:"Error al guardar la direcci√≥n"})}finally{V(!1)}},className:"bg-gray-50 p-6 rounded-3xl border border-gray-100 space-y-4 mb-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:"Alias (Ej: Casa, Oficina)",required:!0,value:B.name,onChange:e=>K({...B,name:e.target.value}),className:"border-2 border-white rounded-xl p-3 font-bold focus:border-primary-light outline-none shadow-sm h-[58px]"}),r.jsx("input",{type:"text",placeholder:"Direcci√≥n / Calle",required:!0,value:B.street,onChange:e=>K({...B,street:e.target.value}),className:"border-2 border-white rounded-xl p-3 font-bold focus:border-primary-light outline-none shadow-sm h-[58px]"}),r.jsx("input",{type:"text",placeholder:"Barrio",value:B.neighborhood,onChange:e=>K({...B,neighborhood:e.target.value}),className:"border-2 border-white rounded-xl p-3 font-bold focus:border-primary-light outline-none shadow-sm h-[58px]"}),r.jsx("input",{type:"text",placeholder:"Info Adicional (Apto, Unidad, Torre)",value:B.additionalInfo,onChange:e=>K({...B,additionalInfo:e.target.value}),className:"border-2 border-white rounded-xl p-3 font-bold focus:border-primary-light outline-none shadow-sm h-[58px]"}),r.jsx("input",{type:"text",placeholder:"Tel√©fono de Contacto",value:B.phone,onChange:e=>K({...B,phone:e.target.value}),className:"border-2 border-white rounded-xl p-3 font-bold focus:border-primary-light outline-none shadow-sm h-[58px]"}),r.jsx(j,{placeholder:"Departamento",value:B.state,onChange:e=>K({...B,state:e,city:""}),options:N.map(e=>e.departamento)}),r.jsx(j,{placeholder:"Ciudad / Municipio",value:B.city,onChange:e=>K({...B,city:e}),options:B.state?(null==(e=N.find(e=>e.departamento===B.state))?void 0:e.ciudades)||[]:N.flatMap(e=>e.ciudades)}),r.jsx("input",{type:"text",placeholder:"C√≥digo Postal (Opcional)",value:B.zip,onChange:e=>K({...B,zip:e.target.value}),className:"border-2 border-white rounded-xl p-3 font-bold focus:border-primary-light outline-none shadow-sm h-[58px]"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"isDefault",checked:B.isDefault,onChange:e=>K({...B,isDefault:e.target.checked}),className:"w-4 h-4 accent-primary rounded-md"}),r.jsx("label",{htmlFor:"isDefault",className:"text-sm font-bold text-gray-500",children:"Direcci√≥n principal"})]}),r.jsx("button",{type:"submit",disabled:O,className:"bg-primary text-white rounded-xl px-6 py-2 text-xs font-bold shadow-md hover:bg-primary-dark transition-colors",children:O?"Guardando...":"Guardar Direcci√≥n"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E.addresses&&E.addresses.length>0?E.addresses.map((e,s)=>r.jsxs("div",{className:"border-2 border-pink-50 p-6 relative bg-white rounded-3xl shadow-sm hover:shadow-md transition-shadow",children:[e.isDefault&&r.jsx("span",{className:"absolute top-4 right-4 bg-pink-100 text-primary text-[10px] font-bold px-2 py-1 rounded-full uppercase",children:"Principal"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-bold text-lg text-secondary mb-1",children:e.name}),r.jsx("p",{className:"text-gray-500 text-sm font-medium",children:e.street}),r.jsxs("p",{className:"text-gray-400 text-sm",children:[e.city,", ",e.state]})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>(e=>{K({name:e.name||"",street:e.street||"",neighborhood:e.neighborhood||"",city:e.city||"",state:e.state||"",zip:e.zip||"",country:e.country||"Colombia",additionalInfo:e.additionalInfo||"",phone:e.phone||"",isDefault:e.isDefault||!1}),J(e._id),H(!0),window.scrollTo({top:300,behavior:"smooth"})})(e),className:"text-xs font-bold text-gray-400 hover:text-primary transition-colors",children:"Editar"}),r.jsx("button",{onClick:()=>(async e=>{if(window.confirm("¬øEst√°s seguro de que quieres eliminar esta direcci√≥n?")){V(!0);try{await x.delete(`/users/address/${e}`),await A(),F({type:"success",text:"Direcci√≥n eliminada correctamente"})}catch(s){console.error("Error deleting address",s),F({type:"error",text:"Error al eliminar la direcci√≥n"})}finally{V(!1)}}})(e._id),className:"text-xs font-bold text-gray-400 hover:text-red-400 transition-colors",children:"Eliminar"})]})]},s)):r.jsxs("div",{className:"col-span-full py-12 text-center bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200",children:[r.jsx(v,{className:"w-8 h-8 mx-auto text-gray-300 mb-2"}),r.jsx("p",{className:"text-sm font-bold text-gray-500",children:"No tienes direcciones registradas"})]})})]}),"wallet"===S&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-secondary mb-6 border-b-2 border-pink-50 pb-4",children:"M√©todos de Pago"}),r.jsxs("div",{className:"p-8 bg-blue-50/50 border border-blue-100 rounded-3xl flex items-start space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center shrink-0 shadow-sm text-blue-400",children:r.jsx(k,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-black uppercase text-blue-900 mb-2 text-sm",children:"Transacciones Protegidas"}),r.jsxs("p",{className:"text-blue-800 text-sm leading-relaxed opacity-80 mb-4",children:["En ",r.jsx("span",{className:"font-bold",children:"Kimju Hogar"})," utilizamos ",r.jsx("span",{className:"font-bold",children:"Mercado Pago"})," para procesar todos tus pagos de forma segura."]}),r.jsx("div",{className:"flex space-x-3 grayscale opacity-60 hover:opacity-100 transition-opacity",children:r.jsx("img",{src:"https://logodownload.org/wp-content/uploads/2019/06/mercado-pago-logo.png",alt:"Mercado Pago",className:"h-5"})})]})]}),r.jsx("div",{className:"border-2 border-dashed border-gray-100 p-8 text-center bg-gray-50 rounded-3xl",children:r.jsx("p",{className:"text-gray-400 font-bold text-xs",children:"Tus m√©todos de pago aparecer√°n aqu√≠ durante el proceso de compra."})})]})]},S)})]})]})}):null};export{S as default};
