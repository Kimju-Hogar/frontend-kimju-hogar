import{u as e,a as s,r as t,d as a,j as r,P as l,e as o,H as i,S as n,c as d}from"./index-uFpnW5qm.js";import{S as c}from"./SEO-YBH-Panh.js";import{S as x}from"./sparkles-tM1jC2_7.js";import{F as p}from"./filter-DG0c3bws.js";const m=()=>{const{addToCart:m,setIsCartOpen:h}=e(),u=s(),[g,f]=t.useState([]),[b,j]=t.useState([]),[w,v]=t.useState([]),y=a(),[N,k]=t.useState(""),[C,S]=t.useState("All"),[z,A]=t.useState(!0);return t.useEffect(()=>{(async()=>{try{const e=new URLSearchParams(y.search),s=e.get("category"),t=e.get("search");s&&S(s),t&&k(t);const[a,r]=await Promise.all([d.get("/products"),d.get("/categories")]);f(a.data);const l=r.data,o=a.data.length;j([{name:"All",productCount:o},...l])}catch(e){console.error("Error fetching shop data",e)}finally{A(!1)}})()},[y.search]),t.useEffect(()=>{let e=g;"All"!==C&&(e=e.filter(e=>e.category===C)),N&&(e=e.filter(e=>e.name.toLowerCase().includes(N.toLowerCase()))),v(e)},[N,C,g]),r.jsxs(l,{children:[r.jsx(c,{title:"Tienda de Cositas Lindas",description:"Explora nuestro catÃ¡logo de productos de decoraciÃ³n para el hogar en Valledupar."}),r.jsx("div",{className:"pt-22 pb-20"}),r.jsxs("div",{className:"bg-white/50 min-h-screen pt-24 pb-20 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-pink-100/40 rounded-full blur-[100px] -z-10 pointer-events-none"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-purple-100/40 rounded-full blur-[100px] -z-10 pointer-events-none"}),r.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(x,{className:"w-6 h-6 text-primary animate-pulse"}),r.jsx("h1",{className:"text-5xl font-display font-black text-secondary tracking-tight",children:"Tienda"})]}),r.jsx("p",{className:"text-gray-500 font-medium max-w-md",children:"Explora nuestra colecciÃ³n de cositas lindas para tu hogar. ðŸŒ¸"})]}),r.jsxs("div",{className:"relative w-full md:w-96",children:[r.jsx("input",{type:"text",placeholder:"Buscar cositas...",className:"w-full bg-white border-2 border-pink-100 rounded-full p-4 pl-12 font-medium text-gray-600 placeholder:text-pink-300 focus:outline-none focus:border-primary focus:ring-4 focus:ring-pink-100 transition-all shadow-sm",value:N,onChange:e=>k(e.target.value)}),r.jsx(o,{className:"absolute left-4 top-4 w-6 h-6 text-pink-300"})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[r.jsx("aside",{className:"w-full lg:w-64 space-y-8 flex-shrink-0",children:r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border-2 border-pink-100 rounded-3xl p-6 shadow-sm",children:[r.jsxs("h3",{className:"text-xl font-display font-bold mb-6 flex items-center text-secondary border-b-2 border-pink-50 pb-2",children:[r.jsx(p,{className:"w-5 h-5 mr-2 text-primary"})," CategorÃ­as"]}),r.jsx("ul",{className:"space-y-2",children:b.map((e,s)=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>S(e.name),className:"w-full text-left font-bold text-sm px-4 py-3 rounded-xl transition-all flex justify-between items-center\n                                                "+(C===e.name?"bg-primary text-white shadow-md transform scale-105":"text-gray-500 hover:bg-pink-50 hover:text-primary"),children:[r.jsxs("div",{className:"flex items-center gap-2",children:["All"===e.name?"Todos":e.name,C===e.name&&r.jsx(i,{className:"w-3 h-3 fill-white"})]}),r.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full "+(C===e.name?"bg-white/20 text-white":"bg-pink-50 text-primary"),children:e.productCount})]})},s))})]})}),r.jsx("div",{className:"flex-1",children:z?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(e=>r.jsx("div",{className:"animate-pulse bg-gray-100 rounded-3xl aspect-[3/4]"},e))}):w.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-8",children:w.map(e=>r.jsx("div",{className:"group block cursor-pointer",onClick:()=>u(`/product/${e._id}`),children:r.jsxs("div",{className:"card-kawaii h-full flex flex-col relative",children:[r.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-50 p-4 rounded-b-3xl",children:[e.discount>0&&r.jsxs("span",{className:"absolute top-4 right-4 bg-primary text-white text-xs px-3 py-1 rounded-full shadow-sm z-10 rotate-3",children:["-",e.discount,"%"]}),r.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded-xl group-hover:scale-105 transition-transform duration-500",loading:"lazy",width:"400",height:"400"})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),S(e.category)},className:"inline-block bg-pink-50 px-2 py-1 rounded-md text-[10px] uppercase font-bold tracking-wider text-primary border border-pink-100 hover:bg-primary hover:text-white transition-colors relative z-20",children:e.category}),e.stock<=5&&e.stock>0&&r.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase flex items-center bg-red-50 px-2 py-0.5 rounded-full",children:"Â¡Ãšltimos!"})]}),r.jsx("h3",{className:"text-lg text-white mb-1 truncate group-hover:text-white transition-colors",title:e.name,children:e.name}),r.jsxs("div",{className:"flex justify-between items-end mt-4",children:[r.jsxs("div",{className:"flex flex-col",children:[e.discount>0&&r.jsxs("span",{className:"text-secondary text-xs font-semibold hidden md:block",children:["Antes $",e.price.toLocaleString()]}),r.jsxs("span",{className:"text-2xl font-display text-primary px-2 bg-white rounded-full group-hover:scale-105 transition-transform duration-500",children:["$",(e.price*(1-(e.discount||0)/100)).toLocaleString()]})]}),r.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),m(e),h(!0)},className:"w-10 h-10 rounded-full bg-secondary text-white flex items-center justify-center group-hover:bg-white group-hover:text-secondary transition-colors shadow-lg transform group-hover:scale-110 relative z-20",children:r.jsx(n,{className:"w-5 h-5"})})]})]})]})},e._id))}):r.jsxs("div",{className:"text-center py-20 bg-white/50 border-2 border-dashed border-pink-200 rounded-3xl",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-300 mb-2",children:"No se encontraron productos ðŸ˜¢"}),r.jsx("button",{onClick:()=>{k(""),S("All")},className:"mt-4 text-primary font-bold underline hover:text-primary-dark",children:"Ver todos los productos"})]})})]})]})]})]})};export{m as default};
